{% extends 'base.html' %}
{% load static %}
{% block title %}
{% endblock %}
{% block css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="{% static 'pages/profile/profile.css' %}">
    <link rel="stylesheet" href="{% static 'pages/profile/myCompany/editProfile/index.css' %}">
{% endblock %}
{% block content %}
<main class="edit__profile">
    <nav class="breadcrumbs bg-[#FFFFFC]">
        <div class="container">
            <div class="">
                <div class="flex gap-4 py-4">
                    <div class="flex items-center gap-4">
                        <img src="{% static 'assets/images/icons/home.svg' %}" alt=""/>
                        <img src="{% static 'assets/images/icons/arrow-prev.svg' %}" alt=""/>
                    </div>
                    <p class="font-normal font-mulish text-[#A0A0A0]">Личный кабинет</p>
                </div>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="mt-[30px] lg-md:mt-0 lg-md:grid grid-cols-3 lg-md:gap-5 xl:grid-cols-4">
            <!--  this section is for avatar  -->
            <section class="hidden lg-md:block mt-[30px] lg-md:mt-[50px]">
                <div class="container">
                    <div class="shadow-card-shadow rounded-[10px] px-5 py-[15px]">
                        <!-- upload avatar-->
                        <div class="upload__avatar text-center flex justify-center">
                            <div class="relative">
                                <img class="absolute right-0 bottom-0"
                                     src="{% static 'assets/images/icons/camera-outline.svg' %}"
                                     alt="">
                                <form class="rounded-full overflow-hidden  w-20 h-20" action="">
                                    <label for="upload" class="h-full flex-col items-center gap-2 cursor-pointer">
                                        {% if user.buyer.image %}
                                        <img class="object-cover h-full" id="avatar"
                                             src="{{ user.buyer.image.url }}" alt="">
                                        {% else %}
                                        <img class="object-cover h-full" id="avatar"
                                             src="{% static 'assets/images/icons/Avatar.svg' %}" alt="">
                                        {% endif %}
                                    </label>
                                    <input id="upload" type="file" class="hidden"/>
                                </form>
                            </div>
                        </div>
                        <h2 class="text-center text-lg font-semibold mt-2.5">{{ user.first_name }}</h2>
                        <!-- dropdown menu-->
                <div
                  class="dropdown mt-[30px] px-2.5 py-[15px] btn-outlined border-[#A0A0A080] hover:bg-transparent lg-md:hidden"
                >
                  <button
                    class="dropdown__btn px-2.5 w-full flex items-center justify-between text-dark-text"
                  >
                    <p class="text-lg font-bold">Товары</p>
                    <img
                      class="w-5 h-5"
                      src="{% static 'assets/images/icons/ios-arrow.svg' %}"
                      alt=""
                    />
                  </button>
                  <ul
                    class="dropdown__menu h-0 text-dark-text overflow-hidden transition-all duration-300 ease-in text-lg"
                  >
                    <li class="dropdown__item">
                      <a href="{% url 'view_profile' %}"
                        >Моя компания</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'user_tenders' %}"
                        >Закупки</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'user_products' %}"
                        >Товары</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'chat_list' %}"
                        >Сообщения</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'tariffs' %}"
                        >Premium тарифы</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'settings' %}"
                        >Настройки аккаунта</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'balance' %}">
                        Баланс</a>
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'favorites' %}"
                        >Избранные</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'send_message' %}"
                        >Служба поддержки</a
                      >
                    </li>
                  </ul>
                </div>
                        <!-- dropdown menu end-->
                        <!-- desktop menu-->
                <div class="hidden lg-md:block">
                  <ul class="flex flex-col">
                    <li class="dropdown__item">
                      <a href="{% url 'view_profile' %}"
                        >Моя компания</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'user_tenders' %}"
                        >Закупки</a
                      >
                    </li>
                    <li class="dropdown__item active">
                      <a href="{% url 'user_products' %}"
                        >Товары</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'chat_list' %}"
                        >Сообщения</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'analytic' %}"
                        >Статистика</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'tariffs' %}"
                        >Premium тарифы</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'settings' %}"
                        >Настройки аккаунта</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'balance' %}">
                        Баланс</a>
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'favorites' %}"
                        >Избранные</a
                      >
                    </li>
                    <li class="dropdown__item">
                      <a href="{% url 'send_message' %}"
                        >Служба поддержки</a
                      >
                    </li>
                  </ul>
                </div>
                        <!-- desktop menu end-->
                    </div>
                </div>
            </section>
            <!-- these sections are for main content  -->
            <section class="main-content lg-md:mt-[50px] lg-md:col-span-2 xl:col-span-3 lg-md:mb-[120px]">
                <div class="card__wrapper mb-28 h-full tab-content shadow-card-shadow rounded-[10px] lg-md:mb-0">
                    <div
                    id="edit-category-block"
                    class="cards px-10 py-7 rounded-2xl lg-md:w-[797px] bg-[#fff]"
                  >
                    <div class="flex flex-col gap-5">

                      <div id="test222" class="cursor-pointer flex items-center gap-4">
                          <a href="{% url 'user_products' %}">
                        <svg
                          width="10"
                          height="17"
                          viewBox="0 0 10 17"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg">

                          <path
                            d="M8.5 1.5L1.5 8.5L8.5 15.5"
                            stroke="#2B292C"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        </svg>
                              </a>

                        <p
                          class="text-[#2B292C] md:text-[18px] text-[16px] font-semibold font-mulish"
                        >
                          Редактирование категории
                        </p>
                      </div>
                      <hr class="h-[2px] w-full bg-[#A0A0A0]" />

                      <h6 class="text-[#2B292C] font-bold text-[18px] font-mulish">
                        Название категории
                      </h6>
                      <p class="md:text-[18px] text-[16px] font-normal text-[#4D4D4D]">
                        Пожалуйста, начните с родительской категории, затем добавляйте
                        подкатегории
                      </p>
                        <form action="{% url 'edit_category' object.id %}" id="add_category" method="post">
                                {% csrf_token %}
                            <label for=""></label><select name="parent" id="">
                                <option value="" selected>------------</option>

                                {% for category in categories %}
                                    {% if category.id == form.parent.value %}
                                        <option selected value="{{ category.id }}">{{ category.name }}</option>
                                    {% else %}
                                        <option value="{{ category.id }}">{{ category.name }}</option>
                                    {% endif %}

                                {% endfor %}

                            </select>
                            <br>
                            <div class="flex flex-col gap-4">
                                <label>
                                  <input
                                    class="bg-[#F9F9F9] w-full rounded-2xl pl-5 py-4 border border-[#E6E6E6]"
                                    type="text" name="name"
                                    value="{{ form.name.value }}"
                                  />
                                </label>
                                <button form="add_category"
                                class="text-[#2B292C] bg-[#E4DB00] rounded-[7px] py-4 text-[16px] font-medium font-mulish uppercase"
                              >
                                изменить категорию
                              </button>
                            </div>
                        </form>
                        <form action="{% url 'delete_category' object.id %}" method="post">
                            <button type="submit">
                                {% csrf_token %}
                                <img class="cursor-pointer w-6 h-6" src="{% static '/assets/images/icons/trash.svg' %}" alt="">
                            </button>
                        </form>
                    </div>
                  </div>
                </div>
              </section>
        </div>
    </div>
</main>

{% endblock %}